<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>文档测试</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Curriculum Vitae">
    <link rel="preload" href="/assets/css/0.styles.40e1e164.css" as="style"><link rel="preload" href="/assets/js/app.1b94221b.js" as="script"><link rel="preload" href="/assets/js/2.60568d92.js" as="script"><link rel="preload" href="/assets/js/23.552730b3.js" as="script"><link rel="prefetch" href="/assets/js/10.3d4294c4.js"><link rel="prefetch" href="/assets/js/11.14a477ac.js"><link rel="prefetch" href="/assets/js/12.a5ddb7e5.js"><link rel="prefetch" href="/assets/js/13.aae5c909.js"><link rel="prefetch" href="/assets/js/14.ab694e76.js"><link rel="prefetch" href="/assets/js/15.64315535.js"><link rel="prefetch" href="/assets/js/16.73da9ac4.js"><link rel="prefetch" href="/assets/js/17.a93d8ff3.js"><link rel="prefetch" href="/assets/js/18.b4ced15b.js"><link rel="prefetch" href="/assets/js/19.638c9ba4.js"><link rel="prefetch" href="/assets/js/20.b2eb7bf9.js"><link rel="prefetch" href="/assets/js/21.48394f3a.js"><link rel="prefetch" href="/assets/js/22.35e8a3cc.js"><link rel="prefetch" href="/assets/js/24.e9135eeb.js"><link rel="prefetch" href="/assets/js/25.81b2ea1d.js"><link rel="prefetch" href="/assets/js/26.75302b23.js"><link rel="prefetch" href="/assets/js/27.9e876760.js"><link rel="prefetch" href="/assets/js/28.57922220.js"><link rel="prefetch" href="/assets/js/29.68fbb04d.js"><link rel="prefetch" href="/assets/js/3.fe45d089.js"><link rel="prefetch" href="/assets/js/30.a98a6693.js"><link rel="prefetch" href="/assets/js/31.8202c39f.js"><link rel="prefetch" href="/assets/js/32.febfda4f.js"><link rel="prefetch" href="/assets/js/33.5ae3ee39.js"><link rel="prefetch" href="/assets/js/34.15947107.js"><link rel="prefetch" href="/assets/js/35.d3f8c53a.js"><link rel="prefetch" href="/assets/js/36.b7fee681.js"><link rel="prefetch" href="/assets/js/37.c13c8f17.js"><link rel="prefetch" href="/assets/js/38.793a8df9.js"><link rel="prefetch" href="/assets/js/4.4d86075a.js"><link rel="prefetch" href="/assets/js/5.d5b9441a.js"><link rel="prefetch" href="/assets/js/6.19d672a5.js"><link rel="prefetch" href="/assets/js/7.5f6998cb.js"><link rel="prefetch" href="/assets/js/8.f35ecf57.js"><link rel="prefetch" href="/assets/js/9.99850ec9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.40e1e164.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档测试</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/learning-notes/" class="nav-link">
  技术
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  读书
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/zhaotbj" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/learning-notes/" class="nav-link">
  技术
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  读书
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/zhaotbj" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/数据库/redis的原子性.html" class="sidebar-link">redis的原子性</a></li><li><a href="/数据库/MongoDB总结.html" class="sidebar-link">MongoDB总结</a></li><li><a href="/数据库/redis的数据库.html" class="sidebar-link">redis的数据库</a></li><li><a href="/数据库/MySQL基础与高级.html" class="sidebar-link">基础</a></li><li><a href="/数据库/MongoDB权威指南.html" class="sidebar-link">MongoDB权威指南</a></li><li><a href="/数据库/redis设计与实现.html" class="sidebar-link">数据结构与对象</a></li><li><a href="/数据库/MySQL的join原理.html" class="sidebar-link">/数据库/MySQL的join原理.html</a></li><li><a href="/数据库/MySQL性能优化.html" class="sidebar-link">/数据库/MySQL性能优化.html</a></li><li><a href="/数据库/MySQL总结.html" class="sidebar-link">MySQL总结</a></li><li><a href="/数据库/乐观锁和悲观锁.html" class="sidebar-link">乐观锁和悲观锁</a></li><li><a href="/数据库/redis(图灵学院).html" class="sidebar-link">什么是Redis</a></li><li><a href="/数据库/Redis总结.html" class="sidebar-link">Redis总结</a></li><li><a href="/数据库/Redis底层数据结构及其编码和优点.html" class="sidebar-link">Redis底层数据结构及其编码和优点</a></li><li><a href="/数据库/MySQL索引最佳实践.html" class="active sidebar-link">/数据库/MySQL索引最佳实践.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/数据库/MySQL索引最佳实践.html#explain-中的列" class="sidebar-link">explain 中的列</a></li><li class="sidebar-sub-header"><a href="/数据库/MySQL索引最佳实践.html#索引最佳实践" class="sidebar-link">索引最佳实践</a></li></ul></li><li><a href="/数据库/redis的事件.html" class="sidebar-link">Redis的事件</a></li><li><a href="/数据库/springboot使用h2数据库.html" class="sidebar-link">/数据库/springboot使用h2数据库.html</a></li><li><a href="/数据库/关于NoSQL.html" class="sidebar-link">NoSQL数据库的四大分类</a></li><li><a href="/数据库/布隆过滤器.html" class="sidebar-link">布隆过滤器</a></li><li><a href="/数据库/数据库基础和规范.html" class="sidebar-link">数据库建表规则（三大范式）</a></li><li><a href="/数据库/索引优化ORDER BY排序语句.html" class="sidebar-link">索引优化ORDER BY排序语句</a></li><li><a href="/数据库/覆盖索引，回表查询.html" class="sidebar-link">覆盖索引，回表查询</a></li><li><a href="/数据库/高性能MySQL.html" class="sidebar-link">MySQL架构与历史</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>使用EXPLAIN关键字可以模拟优化器执行SQL语句，从而知道MySQL是 如何处理你的SQL语句的。分析你的查询语句或是结构的性能瓶颈</p> <p>下面是使用 explain 的例子：</p> <p>在 select 语句之前增加 explain 关键字，MySQL 会在查询上设置一个标记，执行查询时，会返回执行计划的信息，而不是执行这条SQL（如果 from 中包含子查询，仍会执行该子查询，将结果放入临时表中）</p> <p><strong>使用的表</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>actor<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>actor<span class="token punctuation">`</span> <span class="token punctuation">(</span>

  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>actor<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'2017-12-22 15:27:18'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'2017-12-22 15:27:18'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'2017-12-22 15:27:18'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>film<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>film<span class="token punctuation">`</span> <span class="token punctuation">(</span>

  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>idx_name<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

 

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>film<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'film0'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'film1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'film2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>film_actor<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>film_actor<span class="token punctuation">`</span> <span class="token punctuation">(</span>

  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>film_id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>remark<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>

  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>idx_film_actor_id<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>film_id<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>film_actor<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>film_id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>mysql&gt; explain select * from actor;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81DF.tmp.jpg)</p> <p>在查询中的每个表会输出一行，如果有两个表通过 join 连接查询，那么会输出两行。表的意义相当广泛：可以是子查询、一个 union 结果等。</p> <p>explain 有两个变种：</p> <p>1）<strong>explain extended</strong>：会在 explain  的基础上额外提供一些查询优化的信息。紧随其后通过 show warnings 命令可以 得到优化后的查询语句，从而看出优化器优化了什么。额外还有 filtered 列，是一个半分比的值，rows * filtered/100 可以估算出将要和 explain 中前一个表进行连接的行数（前一个表指 explain 中的id值比当前表id值小的表）。</p> <p>mysql&gt; explain extended select * from film where id = <strong>1</strong>;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81EF.tmp.jpg)</p> <p>mysql&gt; show warnings;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81F0.tmp.jpg)</p> <p>2）<strong>explain partitions</strong>：相比 explain 多了个 partitions 字段，如果查询是基于分区表的话，会显示查询将访问的分区。</p> <h2 id="explain-中的列"><a href="#explain-中的列" class="header-anchor">#</a> <strong>explain 中的列</strong></h2> <p>接下来我们将展示 explain 中每个列的信息。</p> <h3 id="_1-id列"><a href="#_1-id列" class="header-anchor">#</a> <strong>1.</strong> id列</h3> <p>id列的编号是 select 的序列号，有几个 select 就有几个id，并且id的顺序是按 select 出现的顺序增长的。MySQL将 select 查询分为简单查询(SIMPLE)和复杂查询(PRIMARY)。</p> <p>复杂查询分为三类：简单子查询、派生表（from语句中的子查询）、union 查询。</p> <p>id列越大执行优先级越高，id相同则从上往下执行，id为NULL最后执行</p> <p>1）简单子查询</p> <p>mysql&gt; explain select (select <strong>1</strong> from actor limit <strong>1</strong>) from film;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81F1.tmp.jpg)</p> <p>2）from子句中的子查询</p> <p>mysql&gt; explain select id from (select id from film) as der;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81F2.tmp.jpg)</p> <p>这个查询执行时有个临时表别名为der，外部 select 查询引用了这个临时表</p> <p>3）union查询</p> <p>mysql&gt; explain select <strong>1</strong> union all select <strong>1</strong>;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81F3.tmp.jpg)</p> <p>union结果总是放在一个匿名临时表中，临时表不在SQL中出现，因此它的id是NULL。</p> <h3 id="_2-select-type列"><a href="#_2-select-type列" class="header-anchor">#</a> <strong>2. select_type列</strong></h3> <p>select_type 表示对应行是简单还是复杂的查询，如果是复杂的查询，又是上述三种复杂查询中的哪一种。</p> <p>1）<strong>simple</strong>：简单查询。查询不包含子查询和union</p> <p>mysql&gt; explain select * from film where id = <strong>2</strong>;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps81F4.tmp.jpg)</p> <p>2）<strong>primary</strong>：复杂查询中最外层的 select</p> <p>3）<strong>subquery</strong>：包含在 select 中的子查询（不在 from 子句中）</p> <p>4）<strong>derived</strong>：包含在 from 子句中的子查询。MySQL会将结果存放在一个临时表中，也称为派生表（derived的英文含义）</p> <p>用这个例子来了解 primary、subquery 和 derived 类型</p> <p>mysql&gt; explain select (select <strong>1</strong> from actor where id = <strong>1</strong>) from (select * from film where id = <strong>1</strong>) der;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8205.tmp.jpg)</p> <p>5）<strong>union</strong>：在 union 中的第二个和随后的 select</p> <p>6）<strong>union result</strong>：从 union 临时表检索结果的 select</p> <p>用这个例子来了解 union 和 union result 类型：</p> <p>mysql&gt; explain select <strong>1</strong> union all select <strong>1</strong>;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8206.tmp.jpg)</p> <h3 id="_3-table列"><a href="#_3-table列" class="header-anchor">#</a> <strong>3. table列</strong></h3> <p>这一列表示 explain 的一行正在访问哪个表。</p> <p>当 from 子句中有子查询时，table列是 <derivenN> 格式，表示当前查询依赖 id=N 的查询，于是先执行 id=N 的查询。</derivenN></p> <p>当有 union 时，UNION RESULT 的 table 列的值为&lt;union1,2&gt;，1和2表示参与 union 的 select 行id。</p> <h3 id="_4-type列"><a href="#_4-type列" class="header-anchor">#</a> <strong>4. type列</strong></h3> <p>这一列表示关联类型或访问类型，即MySQL决定如何查找表中的行，查找数据行记录的大概范围。</p> <p>依次从最优到最差分别为：system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</p> <p>一般来说，得保证查询达到range级别，最好达到ref</p> <p><strong>NULL</strong>：mysql能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引。例如：在索引列中选取最小值，可以单独查找索引来完成，不需要在执行时访问表</p> <p>mysql&gt; explain select min(id) from film;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8207.tmp.jpg)</p> <p><strong>const, system</strong>：mysql能对查询的某部分进行优化并将其转化成一个常量（可以看show warnings 的结果）。用于 primary key 或 unique key 的所有列与常数比较时，所以<strong>表最多有一个匹配行</strong>，读取1次，速度比较快。<strong>system是const</strong>的特例，表里只有一条元组匹配时为<strong>system</strong></p> <p>mysql&gt; explain extended select * from (select * from film where id = <strong>1</strong>) tmp;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8208.tmp.jpg)</p> <p>mysql&gt; show warnings;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8209.tmp.jpg)</p> <p><strong>eq_ref</strong>：primary key 或 unique key 索引的所有部分被连接使用 ，最多只会返回一条符合条件的记录。这可能是在 const 之外最好的联接类型了，简单的 select 查询不会出现这种 type。</p> <p>mysql&gt; explain select * from film_actor left join film on film_actor.film_id = film.id;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps820A.tmp.jpg)</p> <p><strong>ref</strong>：相比 eq_ref，不使用唯一索引，而是使用普通索引或者唯一性索引的部分前缀，索引要和某个值相比较，可能会找到多个符合条件的行。</p> <p><strong>1</strong>. 简单 select 查询，name是普通索引（非唯一索引） mysql&gt; explain select * from film where name = &quot;film1&quot;;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps821A.tmp.jpg)</p> <p><strong>2</strong>.关联表查询，idx_film_actor_id是film_id和actor_id的联合索引，这里使用到了film_actor的左边前缀film_id部分。 mysql&gt; explain select film_id from film left join film_actor on film.id = film_actor.film_id;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps821B.tmp.jpg)</p> <p><strong>range</strong>：范围扫描通常出现在 <strong>in(), between ,&gt; ,&lt;, &gt;=</strong> 等操作中。使用一个索引来检索给定范围的行。</p> <p>mysql&gt; explain select * from actor where id &gt; <strong>1</strong>;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps821C.tmp.jpg)</p> <p><strong>index</strong>：扫描全表索引，这通常比ALL快一些。（index是从索引中读取的，而all是从硬盘中读取）</p> <p>mysql&gt; explain select * from film;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps821D.tmp.jpg)</p> <p><strong>ALL</strong>：即全表扫描，意味着mysql需要从头到尾去查找所需要的行。通常情况下这需要增加索引来进行优化了</p> <p>mysql&gt; explain select * from actor;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps821E.tmp.jpg)</p> <h3 id="_5-possible-keys列"><a href="#_5-possible-keys列" class="header-anchor">#</a> <strong>5. possible_keys列</strong></h3> <p>这一列显示查询可能使用哪些索引来查找。</p> <p>explain 时可能出现 possible_keys 有列，而 key 显示 NULL 的情况，这种情况是因为表中数据不多，mysql认为索引对此查询帮助不大，选择了全表查询。</p> <p>如果该列是NULL，则没有相关的索引。在这种情况下，可以通过检查 where 子句看是否可以创造一个适当的索引来提高查询性能，然后用 explain 查看效果。</p> <h3 id="_6-key列"><a href="#_6-key列" class="header-anchor">#</a> <strong>6. key列</strong></h3> <p>这一列显示mysql实际采用哪个索引来优化对该表的访问。</p> <p>如果没有使用索引，则该列是 NULL。如果想强制mysql使用或忽视possible_keys列中的索引，在查询中使用 force index、ignore index。</p> <h3 id="_7-key-len列"><a href="#_7-key-len列" class="header-anchor">#</a> <strong>7. key_len列</strong></h3> <p>这一列显示了mysql在索引里使用的字节数，通过这个值可以算出具体使用了索引中的哪些列。</p> <p>举例来说，film_actor的联合索引 idx_film_actor_id 由 film_id 和 actor_id 两个int列组成，并且每个int是4字节。通过结果中的key_len=4可推断出查询使用了第一个列：film_id列来执行索引查找。</p> <p>mysql&gt; explain select * from film_actor where film_id = <strong>2</strong>;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps821F.tmp.jpg)</p> <p>key_len计算规则如下：</p> <p>字符串</p> <ul><li>char(n)：n字节长度</li> <li>varchar(n)：2字节存储字符串长度，如果是utf-8，则长度 3n + 2</li></ul> <p>数值类型</p> <ul><li>tinyint：1字节</li> <li>smallint：2字节</li> <li>int：4字节</li> <li>bigint：8字节</li></ul> <p>时间类型</p> <ul><li>date：3字节</li> <li>timestamp：4字节</li> <li>datetime：8字节</li></ul> <p>如果字段允许为 NULL，需要1字节记录是否为 NULL</p> <p>索引最大长度是768字节，当字符串过长时，mysql会做一个类似左前缀索引的处理，将前半部分的字符提取出来做索引。</p> <h3 id="_8-ref列"><a href="#_8-ref列" class="header-anchor">#</a> <strong>8. ref列</strong></h3> <p>这一列显示了在key列记录的索引中，表查找值所用到的列或常量，常见的有：const（常量），字段名（例：film.id）</p> <h3 id="_9-rows列"><a href="#_9-rows列" class="header-anchor">#</a> <strong>9. rows列</strong></h3> <p>这一列是mysql估计要读取并检测的行数，注意这个不是结果集里的行数。</p> <h3 id="_10-extra列"><a href="#_10-extra列" class="header-anchor">#</a> <strong>10. Extra列</strong></h3> <p>这一列展示的是额外信息。常见的重要值如下：</p> <p><strong>Using index</strong>：查询的列被索引覆盖，并且where筛选条件是索引的前导列，是性能高的表现。一般是使用了<strong>覆盖索引</strong>(索引包含了所有查询的字段)。对于innodb来说，如果是辅助索引性能会有不少提高</p> <p>mysql&gt; explain select film_id from film_actor where film_id = 1;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8220.tmp.jpg)</p> <p><strong>Using where</strong>：查询的列未被索引覆盖，where筛选条件非索引的前导列</p> <p>mysql&gt; explain select * from actor where name = 'a';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8221.tmp.jpg)</p> <p><strong>Using where Using index</strong>：查询的列被索引覆盖，并且where筛选条件是索引列之一但是不是索引的前导列，意味着无法直接通过索引查找来查询到符合条件的数据</p> <p>mysql&gt; explain select film_id from film_actor where actor_id = 1;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8222.tmp.jpg)</p> <p><strong>NULL</strong>：查询的列未被索引覆盖，并且where筛选条件是索引的前导列，意味着用到了索引，但是部分字段未被索引覆盖，必须通过“回表”来实现，不是纯粹地用到了索引，也不是完全没用到索引</p> <p>mysql&gt;explain select * from film_actor where film_id = 1;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8223.tmp.jpg)</p> <p><strong>Using index condition</strong>：与Using where类似，查询的列不完全被索引覆盖，where条件中是一个前导列的范围；</p> <p>mysql&gt; explain select * from film_actor where film_id &gt; 1;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8224.tmp.jpg)</p> <p><strong>Using temporary</strong>：mysql需要创建一张临时表来处理查询。出现这种情况一般是要进行优化的，首先是想到用索引来优化。</p> <p><strong>1</strong>. actor.name没有索引，此时创建了张临时表来distinct mysql&gt; explain select distinct name from actor;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8235.tmp.jpg)</p> <p><strong>2</strong>. film.name建立了idx_name索引，此时查询时extra是using index,没有用临时表 mysql&gt; explain select distinct name from film;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8236.tmp.jpg)</p> <p><strong>Using filesort</strong>：mysql 会对结果使用一个外部索引排序，而不是按索引次序从表里读取行。此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行信息。这种情况下一般也是要考虑使用索引来优化的。</p> <p><strong>1</strong>. actor.name未创建索引，会浏览actor整个表，保存排序关键字name和对应的id，然后排序name并检索行记录 mysql&gt; explain select * from actor order by name;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8237.tmp.jpg)</p> <p><strong>2</strong>. film.name建立了idx_name索引,此时查询时extra是using indexmysql&gt; explain select * from film order by name;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8238.tmp.jpg)</p> <h2 id="索引最佳实践"><a href="#索引最佳实践" class="header-anchor">#</a> <strong>索引最佳实践</strong></h2> <p><strong>使用的表</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>employees<span class="token punctuation">`</span> <span class="token punctuation">(</span>

  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>age<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>position<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span> <span class="token keyword">COMMENT</span> <span class="token string">'职位'</span><span class="token punctuation">,</span>

  <span class="token punctuation">`</span>hire_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'入职时间'</span><span class="token punctuation">,</span>

  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>idx_name_age_position<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>age<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>position<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span>

<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">4</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'员工记录表'</span><span class="token punctuation">;</span>

 

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>position<span class="token punctuation">,</span>hire_time<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'LiLei'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">'manager'</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>position<span class="token punctuation">,</span>hire_time<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'HanMeimei'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'dev'</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>position<span class="token punctuation">,</span>hire_time<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Lucy'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'dev'</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>最佳实践</strong></p> <p><strong>1. 全值匹配</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name= 'LiLei';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8239.tmp.jpg)</p> <p>EXPLAIN SELECT * FROM employees WHERE name= 'LiLei' AND age = 22;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps823A.tmp.jpg)</p> <p>EXPLAIN SELECT * FROM employees WHERE name= 'LiLei' AND age = 22 AND position ='manager';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps823B.tmp.jpg)</p> <p><strong>2.最佳左前缀法则</strong></p> <p>如果索引了多列，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且不跳过索引中的列。</p> <p>EXPLAIN SELECT * FROM employees WHERE age = 22 AND position ='manager';</p> <p>EXPLAIN SELECT * FROM employees WHERE position = 'manager';</p> <p>EXPLAIN SELECT * FROM employees WHERE name = 'LiLei';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps824C.tmp.jpg)</p> <p><strong>3.不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name = 'LiLei';</p> <p>EXPLAIN SELECT * FROM employees WHERE left(name,3) = 'LiLei';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps824D.tmp.jpg)</p> <p><strong>4.存储引擎不能使用索引中范围条件右边的列</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name= 'LiLei' AND age = 22 AND position ='manager';</p> <p>EXPLAIN SELECT * FROM employees WHERE name= 'LiLei' AND age &gt; 22 AND position ='manager';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps824E.tmp.jpg)</p> <p><strong>5.尽量使用覆盖索引（只访问索引的查询（索引列包含查询列）），减少select *语句</strong></p> <p>EXPLAIN SELECT name,age FROM employees WHERE name= 'LiLei' AND age = 23 AND position ='manager';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps824F.tmp.jpg)</p> <p>EXPLAIN SELECT * FROM employees WHERE name= 'LiLei' AND age = 23 AND position ='manager';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8250.tmp.jpg)</p> <p><strong>6.mysql在使用不等于（！=或者&lt;&gt;）的时候无法使用索引会导致全表扫描</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name != 'LiLei'</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8260.tmp.jpg)</p> <p><strong>7.is null,is not null 也无法使用索引</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name is null</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8261.tmp.jpg)</p> <p><strong>8.like以通配符开头（'$abc...'）mysql索引失效会变成全表扫描操作</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name like '%Lei'</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8262.tmp.jpg)</p> <p>EXPLAIN SELECT * FROM employees WHERE name like 'Lei%'</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8263.tmp.jpg)</p> <p>问题：解决like'%字符串%'索引不被使用的方法？</p> <p>a）使用覆盖索引，查询字段必须是建立覆盖索引字段</p> <p>EXPLAIN SELECT name,age,position FROM employees WHERE name like '%Lei%';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8264.tmp.jpg)</p> <p>b）当覆盖索引指向的字段是varchar(380)及380以上的字段时，覆盖索引会失效！</p> <p><strong>9.字符串不加单引号索引失效</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name = '1000';</p> <p>EXPLAIN SELECT * FROM employees WHERE name = 1000;</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8275.tmp.jpg)</p> <p><strong>10.少用or,用它连接时<strong><strong>很多情况下</strong></strong>索引会失效</strong></p> <p>EXPLAIN SELECT * FROM employees WHERE name = 'LiLei' or name = 'HanMeimei';</p> <p>![img](file:///C:\Users\叶超\AppData\Local\Temp\ksohtml\wps8276.tmp.jpg)</p> <p><strong>总结：</strong></p> <p><img src="http://img.fosuchao.com/20200304214733.png" alt=""></p> <p><strong>like KK%相当于=常量，%KK和%KK% 相当于范围</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/数据库/Redis底层数据结构及其编码和优点.html" class="prev">
        Redis底层数据结构及其编码和优点
      </a></span> <span class="next"><a href="/数据库/redis的事件.html">
        Redis的事件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1b94221b.js" defer></script><script src="/assets/js/2.60568d92.js" defer></script><script src="/assets/js/23.552730b3.js" defer></script>
  </body>
</html>
