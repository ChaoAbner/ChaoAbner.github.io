(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{352:function(t,a,r){"use strict";r.r(a);var s=r(43),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"mongodb权威指南"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mongodb权威指南"}},[t._v("#")]),t._v(" MongoDB权威指南")]),t._v(" "),r("h2",{attrs:{id:"索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[t._v("#")]),t._v(" 索引")]),t._v(" "),r("h3",{attrs:{id:"简介"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),r("p",[t._v("​\t\t如果我们查询时只需要查询一个键，这个时候可以添加一个索引来加快查询的速度。（1为升序，-1为降序）")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575123563042.png",alt:"1575123563042"}})]),t._v(" "),r("p",[t._v("​\t\t对于同一个集合，索引只需要创建一次，不用重复创建。")]),t._v(" "),r("p",[t._v("​\t\t或者建立多个索引（前后顺序有影响）")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575123715395.png",alt:"1575123715395"}})]),t._v(" "),r("p",[t._v("​\t\t当我们要通过一个键比如时间来排序查询的时候，就会进行全表扫描，这个时候，我们需要建立多个索引来加快查询速度。")]),t._v(" "),r("p",[r("strong",[t._v("注意事项")])]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575124374201.png",alt:"1575124374201"}})]),t._v(" "),r("h4",{attrs:{id:"扩展索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#扩展索引"}},[t._v("#")]),t._v(" 扩展索引")]),t._v(" "),r("p",[t._v("​\t\t如果我们要经常查询用户的最新状态（时间），那么最好把"),r("code",[t._v("date")]),t._v("放前面，来改变索引的顺序，有效减少内存的交换。")]),t._v(" "),r("p",[r("strong",[t._v("建立索引需要考虑的问题")])]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575124939247.png",alt:"1575124939247"}})]),t._v(" "),r("h4",{attrs:{id:"索引内嵌文档的键"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#索引内嵌文档的键"}},[t._v("#")]),t._v(" 索引内嵌文档的键")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575124981682.png",alt:"1575124981682"}})]),t._v(" "),r("h4",{attrs:{id:"为需要排序的键创建索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#为需要排序的键创建索引"}},[t._v("#")]),t._v(" 为需要排序的键创建索引")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575125062271.png",alt:"1575125062271"}})]),t._v(" "),r("h3",{attrs:{id:"唯一索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#唯一索引"}},[t._v("#")]),t._v(" 唯一索引")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575125578201.png",alt:"1575125578201"}})]),t._v(" "),r("p",[t._v("Object(id)就是一个唯一索引，有一个不同点就是不能删除")]),t._v(" "),r("h4",{attrs:{id:"地理空间索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#地理空间索引"}},[t._v("#")]),t._v(" 地理空间索引")]),t._v(" "),r("h3",{attrs:{id:"聚合"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#聚合"}},[t._v("#")]),t._v(" 聚合")]),t._v(" "),r("h4",{attrs:{id:"count"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#count"}},[t._v("#")]),t._v(" count")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575128675203.png",alt:"1575128675203"}})]),t._v(" "),r("h4",{attrs:{id:"distinct"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#distinct"}},[t._v("#")]),t._v(" distinct")]),t._v(" "),r("p",[t._v("找出给定键的所有"),r("strong",[t._v("不同的值")]),t._v("（数组）。使用时需要"),r("strong",[t._v("指定集合和键")]),t._v("。")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575128889804.png",alt:"1575128889804"}})]),t._v(" "),r("h4",{attrs:{id:"group"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#group"}},[t._v("#")]),t._v(" group")]),t._v(" "),r("p",[t._v("跟SQL中的group by差不多，聚合多个组内的文档，产生一个结果文档。")]),t._v(" "),r("h4",{attrs:{id:"mapdeduce"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mapdeduce"}},[t._v("#")]),t._v(" MapDeduce")]),t._v(" "),r("p",[t._v("​\t\t上面三个聚合能做的事情都能做。")]),t._v(" "),r("p",[t._v("​\t\t缺点是速度，group不是很快，而MapReduce更慢。"),r("strong",[t._v("绝不要用在实时环境中")]),t._v("，要用后台任务来运行MapDeduce，将创建一个保存结果的集合，可以对这个集合进行实时查询。")]),t._v(" "),r("p",[r("strong",[t._v("示例：")])]),t._v(" "),r("h5",{attrs:{id:"找出集合中的所有键"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#找出集合中的所有键"}},[t._v("#")]),t._v(" 找出集合中的所有键")]),t._v(" "),r("h5",{attrs:{id:"网页分类"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#网页分类"}},[t._v("#")]),t._v(" 网页分类")]),t._v(" "),r("h5",{attrs:{id:"mapreduce的键"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mapreduce的键"}},[t._v("#")]),t._v(" MapReduce的键")]),t._v(" "),r("p",[t._v("mapreduce")]),t._v(" "),r("p",[t._v("map")]),t._v(" "),r("p",[t._v("reduce")]),t._v(" "),r("p",[t._v("finalize：函数。将reduce的结果发送给这个键，进行处理的最后异步")]),t._v(" "),r("p",[t._v("keeptemp：布尔值。连接关闭时临时结果的集合是否保存")]),t._v(" "),r("p",[t._v("output： 字符串。结果集合的名字。隐含着keeptemp：true。")]),t._v(" "),r("p",[t._v("query： 文档。在发往map前，用指定条件进行过滤文档。")]),t._v(" "),r("p",[t._v("sort：文档。在发往map前，给文档排序（跟limit一起使用很有用）")]),t._v(" "),r("p",[t._v("limit：整数。发往map函数的文档数量的上限。")]),t._v(" "),r("p",[t._v("scope：文档。js中要用到的变量。")]),t._v(" "),r("p",[t._v("verbose：布尔值。是否产生更加详尽的服务器日志。")]),t._v(" "),r("p",[r("img",{attrs:{src:"F:%5CtyporaImg%5C1575172971868.png",alt:"1575172971868"}})]),t._v(" "),r("h2",{attrs:{id:"集群"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#集群"}},[t._v("#")]),t._v(" 集群")]),t._v(" "),r("p",[t._v("Mongodb的集群架构如下：")])])}),[],!1,null,null,null);a.default=v.exports}}]);